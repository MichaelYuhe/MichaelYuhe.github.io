# HTTP各版本区别


## HTTP各版本区别

## HTTP1.0 和 HTTP1.1

### 连接方面

- HTTP1.0 默认使用非持久连接，而 HTTP1.1 默认使用持久连接
- 持久连接可以使得多个 HTTP 请求复用同一个 TCP 连接，以此避免使用非持久连接时每次需要建立连接的时延

### 资源请求方面

- HTTP1.0 中，存在着一些浪费带宽的对象
  - 无法只发送对象的一部分
  - 无法断点续传
- HTTP1.1 中在请求头引入了 range 头域，允许只请求资源的某一部分，对应的返回码是 206（Partial Content）

### 缓存方面

- HTTP1.0 中使用 header 里面的 `If-Modified-Since` 和 `Expires` 来作为缓存判断的标准
- HTTP1.1 引入了更多缓存控制策略，例如 `Etag`、`If-Match` 等等

### 其他方面

- HTTP1.1 新增了 host 字段，用来指定服务器的域名
  - HTTP1.0 默认每台服务器都只有一个唯一的 IP 地址，因此请求消息中的 URL 不包含主机名，也就是 hostname，但现在一台物理服务器可以存在多个虚拟主机，共享同一个 IP ，这是就需要 host 字段来区分
- HTTP1.1 新增了很多请求方法，比如 `PUT`、`DELETE`、`OPTIONS`等等
- HTTP1.0 只有`GET`、`POST`、`HEAD`



## HTTP1.1 和 HTTP2.0

### 数据格式

- HTTP2 是一个二进制协议，头信息和数据体都是二进制，统称为**帧**，这也是多路复用的基础
- HTTP1.1 报文的头信息必须是文本，数据体则可以是文本也可以是二进制

### 多路复用

- HTTP2 实现了多路复用，即在一个连接里，客户端和服务器都可以同时发送多个请求或者回应，不用按照顺序一一发送，解决了队头堵塞的问题

### 数据流

- HTTP2 使用了数据流的概念：数据包不是按照顺序发送的，同一个连接里面的两个连续的数据包，可能属于不同的请求，因此要对数据包做标记指出它属于哪一个请求

### 头信息压缩

- HTTP1.1 不带状态，所以每次请求都必须附加上所有信息，请求的很多字段都是重复的，比如 Cookie，会浪费带宽、影响速度
- HTTP2 引入了头信息压缩机制
  - 头信息使用 gzip 或者 compress 压缩后再发送
  - 客户端和服务器端同时维护一张头信息表，所有字段都存入这个表，生成索引号，以后只需要发送索引号

### 服务器主动推送

- HTTP2 允许服务器主动向客户端发送资源
- 主动推送的是静态资源，和 WebSocket 发送即使数据不同




















